import{f as P,a as C,r as t,U as h,T as b,k as x,m as f,i as m,j as r,B as g,P as j,R as S,Z as E}from"./index-TJkQKCZh.js";import{C as T}from"./ContenedorReservas-9kflq2cG.js";import{P as A}from"./Pagination-5M5fSOml.js";import"./ConfirmationModal-TVivuumD.js";import"./formatHoraUser-TJ92Iw1g.js";const w=async(e,a,s)=>{const o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${e||""}`}},n=`${C.reservas.deUnPacientes}${a}/${s}`;return await P(n,o)},_=e=>{const{accessToken:a}=t.useContext(h),{setMensaje:s}=t.useContext(b),{dispatch:o}=t.useContext(x),[n,i]=t.useState(!1),[c,l]=t.useState(1),[v,R]=t.useState(!1);return t.useEffect(()=>{(async()=>{try{i(!0);const u=await w(a,c,e),{status:y,error:d,datos:p}=u;y===200?(o({type:f.SET_RESERVAS,payload:p.reservas}),l(p.page),R(p.totalPages)):s(d||"Ocurrió un error al obtener las reservas del paciente")}catch{s("Ocurrió un error al obtener las reservas del paciente")}finally{i(!1)}})()},[a,c,o,s,e]),{loading:n,pagina:c,totalPaginas:v,setPagina:l}},N=({handleAgregarReserva:e})=>{const a=m();return r.jsxs("header",{className:"border-b border-slate-500 p-4 grid grid-flow-col",children:[r.jsx(g,{className:"border border-color-violeta bg-transparent  flex items-center justify-center max-w-fit justify-self-center rounded-lg px-4 py-2  hover:opacity-70 transition-opacity ",tipo:"button",onClickFunction:()=>a(-1),texto:"Volver"}),r.jsx(g,{className:"border border-color-violeta bg-transparent  flex items-center justify-center max-w-fit justify-self-center rounded-lg px-4 py-2  hover:opacity-70 transition-opacity ",tipo:"button",onClickFunction:e,texto:"Agregar Reserva"})]})},F=()=>{const{paciente:e}=t.useContext(j),{loading:a,totalPaginas:s,setPagina:o}=_(e._id),{reservas:n,dispatch:i}=t.useContext(x),c=m(),l=()=>{c(S.admin.agregarReserva),i({type:f.SET_RESERVA,payload:{paciente:{nombre:e.nombre},horario:{horaInicio:E.split("T")[0]}}})};return r.jsxs("section",{className:"grid grid-rows-[70px_auto_1fr] gap-4 mx-auto max-w-5xl w-full p-4",children:[r.jsx(N,{handleAgregarReserva:l}),n.length>0&&r.jsx(A,{loading:a,totalPages:s,onPageChange:o}),r.jsx(T,{reservas:n})]})};export{F as default};
