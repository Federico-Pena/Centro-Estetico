import{r as p,j as e,m as q,c as P,R,d as _}from"./index-D7SXAQHN.js";import{u as O}from"./useForm-CHJZnCkj.js";import{B as n}from"./Button-lIR1oaxr.js";import{u as A,a as V}from"./useServicio-Cni7fXlu.js";import{C as $,O as z}from"./OpenInfo-S9ksRE8R.js";import{T as j}from"./TextAreaLabel-BpRQ34pw.js";import{L as y}from"./LabelInput-BomlkQxr.js";import{T as G}from"./TextErrorForm-D2OMVORA.js";import"./useLoaderContext-0fYFxd9T.js";import"./useObserver-CwXYJtvj.js";function H(o){const i=new FormData;return i.append("nombre",o.nombre.toLowerCase()),i.append("foto",o.imagen),i.append("descripcion",o.descripcion),i.append("descripcionSecundaria",o.descripcionSecundaria),i.append("tituloBeneficios",o.tituloBeneficios),o.beneficiosLista.forEach((r,t)=>{i.append(`beneficiosLista[${t}]`,r)}),i}const M=({handleChange:o,values:i,closeDialog:r})=>{const[t,c]=p.useState(""),l=a=>{a.preventDefault(),t.trim()&&(o({target:{name:"beneficiosLista",value:[...i.beneficiosLista,t]}}),c(""))},s=a=>{const m=i.beneficiosLista.filter(u=>u!==a);o({target:{name:"beneficiosLista",value:m}})};return e.jsx("dialog",{open:!0,className:"fixed inset-0 h-screen w-full z-50 bg-whit grid p-4 ",children:e.jsxs("form",{className:"animate-fadeIn grid gap-4 rounded-lg w-full max-w-lg m-auto p-4 bg-color-verde-blanco border border-gray-300 shadow-lg",title:"Formulario beneficio",children:[e.jsx(j,{name:"beneficiosLista",placeholder:"Beneficio",onChange:a=>c(a.target.value),value:t}),e.jsxs("strong",{className:"text-center text-color-violeta font-betonga text-xl tracking-wider",children:["Beneficios: ",i.beneficiosLista.length||0]}),e.jsx("div",{className:"grid gap-4 max-h-72 overflow-auto",children:i.beneficiosLista.map((a,m)=>e.jsxs("ul",{className:"grid gap-4 border border-slate-500 rounded-lg p-4 items-center grid-cols-[auto_1fr_auto]",children:[e.jsx("li",{children:m+1}),e.jsx("li",{children:a}),e.jsx("li",{children:e.jsx(n,{texto:"Borrar",onClickFunction:()=>s(a)})})]},m))}),e.jsxs("div",{className:"grid grid-cols-2 py-4 gap-4",children:[e.jsx(n,{className:"w-full",bgColor:!0,tipo:"submit",texto:"Agregar",onClickFunction:l}),e.jsx(n,{className:"w-full",tipo:"button",texto:"Volver",onClickFunction:r})]})]})})},U=({servicio:o,values:i,handleChange:r,errors:t,masInfo:c,edicion:l})=>{var s,a;return e.jsxs("section",{className:`grid gap-4 border-t border-slate-500 py-2  ${c?"hidden":""}`,children:[e.jsx("div",{className:"grid gap-4 border-slate-500 py-2",children:e.jsx(y,{className:`${o!=null&&o.nombre?"capitalize":""}`,disabled:!!(o!=null&&o.nombre),value:i.nombre,labelText:"Nombre:",name:"nombre",onChange:r,placeholder:"Drenaje Linfático",type:"text",errors:t})}),e.jsxs("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:[e.jsx("label",{htmlFor:"imagen",children:l?"Cambiar imagen:":"Imagen:"}),e.jsx("input",{name:"imagen",id:"imagen",className:"cursor-pointer border border-slate-500 rounded-lg p-4",type:"file",accept:"image/*",onChange:r}),(i.imgPreview||((s=o.imagen)==null?void 0:s.secure_url))&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Imagen actual"}),e.jsx("img",{className:"justify-self-center aspect-square rounded-lg object-cover object-center",src:i.imgPreview||((a=o.imagen)==null?void 0:a.secure_url),alt:`Imagen de servicio ${i.nombre||""}`})]}),t.imagen&&e.jsxs("small",{className:"text-red-600",children:["* ",t.imagen]})]}),e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(j,{name:"descripcion",labelText:"Descripción:",value:i.descripcion,onChange:r,error:t.descripcion,placeholder:"El drenaje linfático es una técnica de masaje suave y ligero que se utiliza para estimular el sistema linfático del cuerpo. El sistema linfático es una red compleja de vasos y ganglios linfáticos que ayudan a eliminar los desechos y el exceso de líquido de los tejidos."})})]})},J=({masInfo:o,values:i,handleChange:r,errors:t,openDialog:c,handleVerServicio:l})=>{var s;return e.jsxs("section",{className:`${o?"":"hidden"}`,children:[e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(j,{name:"descripcionSecundaria",labelText:"Descripción Mas info:",value:i.descripcionSecundaria,onChange:r,error:t.descripcionSecundaria,placeholder:"Durante una sesión de drenaje linfático, se aplican movimientos suaves y rítmicos sobre la piel, siguiendo el trayecto de los vasos linfáticos. Estos movimientos tienen como objetivo estimular el flujo de la linfa, un líquido transparente que transporta nutrientes y desechos a través del sistema linfático"})}),e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(y,{value:i.tituloBeneficios,labelText:"Titulo Beneficios:",name:"tituloBeneficios",onChange:r,placeholder:"El drenaje linfático puede tener varios beneficios para el cuerpo",type:"text",errors:t})}),e.jsxs("div",{className:"grid gap-4 border-t border-slate-500 py-4",children:[e.jsx(n,{className:"w-full",tipo:"button",texto:"Añadir beneficio",onClickFunction:c}),e.jsxs("p",{children:["Beneficios agregados: ",(s=i.beneficiosLista)==null?void 0:s.length]})]}),t.beneficiosLista&&e.jsxs("small",{className:"text-red-500",children:["* ",t.beneficiosLista]}),e.jsx(n,{className:"w-full my-2",onClickFunction:l,tipo:"button",texto:"Pre-visualizar"})]})},K=({setMasInfo:o,masInfo:i})=>e.jsxs("header",{className:"relative grid justify-between grid-flow-col w-1/2 mx-auto",children:[e.jsx(n,{bgColor:!i,onClickFunction:()=>{o(!1)},texto:"1",tipo:"button"}),e.jsx(n,{bgColor:i,onClickFunction:()=>{o(!0)},texto:"2",tipo:"button"})]}),Q={nombre:{required:!0},imagen:{required:!0},descripcion:{required:!0},descripcionSecundaria:{required:!0},tituloBeneficios:{required:!0},beneficiosLista:{minItems:1}},W={nombre:"",imagen:null,imgPreview:"",descripcion:"",descripcionSecundaria:"",tituloBeneficios:"",beneficiosLista:[]},ce=()=>{var w,S;const o=q(),i=(w=o.state)==null?void 0:w.servicio,r=P(),t=o.pathname===R.admin.editarServicio,{dispatch:c}=A(),[l,s]=p.useState(!1),[a,m]=p.useState(!1),[u,g]=p.useState(!1),[h]=p.useState(i||W),C=p.useRef(),{editarServicio:F,agregarServicio:L}=V(),{handleChange:f,values:d,onSubmitForm:D,errors:x,resetForm:I}=O(h,Q),B=()=>{s(!0)},k=()=>{s(!1)},E=()=>{g(!0),window.scrollTo({behavior:"smooth",top:0})},v=()=>{g(!1),I(),c({type:_.SET_SERVICIO,payload:null}),r(-1)},T=async b=>{const N=H(b);(t?await F(N):await L(N))&&v()};return e.jsxs("section",{className:"grid grid-rows-[auto_1fr] gap-4 px-4 py-8",ref:C,children:[!u&&e.jsx("h1",{className:"uppercase w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:t?"Editar servicio":"Agregar servicio"}),u&&e.jsx(n,{className:"m-auto",onClickFunction:()=>g(!1),texto:"Cerrar",tipo:"button"}),!u&&e.jsxs("form",{onSubmit:b=>D(b,T),className:"animate-fadeIn grid gap-4 px-4 py-8 rounded-lg max-w-lg self-start justify-self-center w-full bg-color-verde-blanco border border-gray-300 shadow-lg",title:"Formulario agregar servicio",children:[e.jsx(K,{masInfo:a,setMasInfo:m}),e.jsx(U,{edicion:t,errors:x,handleChange:f,masInfo:a,servicio:h,values:d}),e.jsx(J,{errors:x,handleChange:f,handleVerServicio:E,masInfo:a,openDialog:B,values:d}),e.jsx(G,{errors:x}),e.jsxs("footer",{className:"grid grid-flow-col gap-2",children:[e.jsx(n,{className:"w-full",bgColor:!0,tipo:"submit",texto:"Guardar"}),e.jsx(n,{className:"w-full",onClickFunction:v,texto:"Cerrar",tipo:"button"})]})]}),l&&e.jsx(M,{closeDialog:k,handleChange:f,values:d}),u&&e.jsxs("section",{className:"grid gap-8",children:[e.jsx("h2",{className:"underline underline-offset-4 w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:"Primera parte"}),e.jsx($,{servicio:d}),e.jsx("h2",{className:"underline underline-offset-4 w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:"Ver mas"}),e.jsx(z,{imgSrc:((S=d.imagen)==null?void 0:S.secure_url)||d.imgPreview,servicio:d})]})]})};export{ce as default};
