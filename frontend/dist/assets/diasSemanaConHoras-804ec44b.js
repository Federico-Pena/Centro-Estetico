import{j as _}from"./index-0a369e23.js";import{f as p,E as d,D as E,c as R,d as N,e as f,g as w,I as g}from"./constantes-122ae6b5.js";const v=({className:e})=>_.jsx("span",{className:`loaderChico ${e||""}`}),C=e=>{const a=new Date(e.fecha),t={year:"numeric",month:"short",day:"numeric",weekday:"short"},n=a.toLocaleDateString("es-UY",t);return a instanceof Date&&n!=="Invalid Date"?n:""};const y=e=>{const a={[d.pago]:"paga",[d.pendiente]:"pendiente",[d.cancelada]:"cancelada"};return e.reduce((t,n)=>{const l=a[n.estado];return l&&(t[l]=n),t},{paga:null,pendiente:null,cancelada:null})},U=(e,a)=>{if(!(e instanceof Date)||!Array.isArray(a))return{};const t=e.toISOString(),n=new Date(`${e}`);n.setMinutes(n.getMinutes()+30);const l=e.toISOString().split("T")[0],i=p(new Date(e)),u=`${l} ${i}`,r=a.find(c=>new Date(c.horario.horaInicio).toISOString()===new Date(n).toISOString()),D=a.filter(c=>{const O=new Date(c.horario.horaInicio).toISOString(),I=new Date(c.horario.horaDeFin).toISOString();return O===t||I===t}),m=D.some(c=>c.pacienteNombre==="admin"),A=D.filter(c=>[d.pago,d.pendiente,d.cancelada].includes(c.estado)),{paga:o,pendiente:s}=y(D),S=(o==null?void 0:o.estado)||(s==null?void 0:s.estado)||"",h=(r==null?void 0:r.estado)===d.cancelada?"":(r==null?void 0:r.estado)||"";return{id:u,estado:S,reservaAdmin:m||(r==null?void 0:r.pacienteNombre)==="admin",reservadas:A,proximaHoraNoDisponible:h}},H=e=>{const a=new Date(e);return Number.isNaN(a.getTime())?[]:(a.setDate(a.getDate()-a.getDay()),[...Array(E)].map((n,l)=>{const i=new Date(a);i.setDate(a.getDate()+l+1);const u=6,r=i.getDay()===u?R:N,D=Array.from({length:r-f+1},(o,s)=>s+f),m=Array.from({length:w/g},(o,s)=>s*g),A=D.flatMap(o=>m.map(s=>{if(M(o,s,i)){const S=new Date(i);return S.setHours(o,s,0),S}return null})).filter(Boolean);return{dia:i,horas:A}}))},M=(e,a,t)=>!(e===20&&a===30)&&!(t.getDay()===6&&e===12&&a===30)&&t.getDay()!==0;export{v as L,U as c,H as d,C as f};
