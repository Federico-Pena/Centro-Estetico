import{r as u}from"./index-BN4e8_cD.js";const x=(t,r,o)=>{const e=o[t];let s;return e&&(e.required&&(r==null||r===""||typeof r=="string"&&r.trim().length===0)?s={[t]:e.message||"Este campo es requerido"}:e.minLength&&r.trim().length<e.minLength?s={[t]:e.message||`Mínimo ${e.minLength} caracteres`}:e.maxLength&&r.trim().length>e.maxLength?s={[t]:e.message||`Máximo ${e.maxLength} caracteres`}:e.minValue&&r<e.minValue?s={[t]:e.message||`El valor debe ser mayor o igual a ${e.minValue}`}:e.maxValue&&r>e.maxValue?s={[t]:e.message||`El valor debe ser menor o igual a ${e.maxValue}`}:e.pattern&&!e.pattern.test(r)?s={[t]:e.message||"Formato no válido"}:Array.isArray(r)&&e.minItems&&r.length<e.minItems?s={[t]:e.message||`Debes agregar al menos ${e.minItems} elemento`}:Array.isArray(r)&&e.maxItems&&r.length>e.maxItems?s={[t]:e.message||`No puedes agregar más de ${e.maxItems} elementos`}:s={[t]:void 0}),s},V=t=>{const{name:r,value:o,files:e,type:s,checked:m}=t.target;let i;return s==="file"?e[0]&&(i=new Promise((d,h)=>{const c=new FileReader;c.onload=g=>{d({[r]:e[0],imgPreview:g.target.result})},c.onerror=g=>{h(g)},c.readAsDataURL(e[0])})):s==="checkbox"?i={[r]:m}:i={[r]:o},i},F=(t,r)=>{const[o,e]=u.useState(t),[s,m]=u.useState({}),i=async n=>{const a=await V(n),{name:l}=n.target;e(f=>({...f,...a}));const p=x(l,a[l],r);m(f=>({...f,...p}))},d=()=>{let n={};return Object.keys(r).forEach(a=>{const l=x(a,o[a],r);n={...n,...l}}),m(n),Object.values(n).every(a=>!a)};return{values:o,errors:s,handleChange:i,resetForm:()=>{e(t),m({})},changeInitialValues:n=>{e(n)},onSubmitForm:(n,a)=>{n.preventDefault(),d()&&a(o)}}};export{F as u};
