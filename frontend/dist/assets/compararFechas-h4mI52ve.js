import{E as d}from"./index-bGblmpTd.js";const l=n=>{const s={[d.pago]:"paga",[d.pendiente]:"pendiente",[d.cancelada]:"cancelada"};return n.reduce((o,t)=>{const i=s[t.estado];return i&&(o[i]=t),o},{paga:null,pendiente:null,cancelada:null})},p=n=>{const s=n.toISOString().split("T")[0],o=n.getHours(),t=n.getMinutes(),i=t<10?`0${t}`:t,S=`${o<10?`0${o}`:o}:${i}`;return`${s}T${S}`},$=(n,s)=>{if(!(n instanceof Date)||!Array.isArray(s))return{};const o=n.toISOString(),t=new Date(`${n}`);t.setMinutes(t.getMinutes()+30);const i=p(n),e=s.find(a=>new Date(a.horario.horaInicio).toISOString()===t.toISOString()),S=s.find(a=>{const r=new Date(a.horario.horaInicio).toISOString(),O=new Date(a.horario.horaDeFin).toISOString();return r===o&&O===t.toISOString()}),c=s.filter(a=>{const r=new Date(a.horario.horaInicio).toISOString(),O=new Date(a.horario.horaDeFin).toISOString();return r===o||O===o}),D=c.some(a=>{var r;return((r=a.paciente)==null?void 0:r.nombre)==="admin"}),{paga:g,pendiente:I,cancelada:u}=l(c),h=(g==null?void 0:g.estado)||(I==null?void 0:I.estado)||(u==null?void 0:u.estado)||"",m=(e==null?void 0:e.estado)===d.cancelada?"":(e==null?void 0:e.estado)||"";return{id:i,estado:h,reservaAdmin:D||(e==null?void 0:e.pacienteNombre)==="admin",reservadas:c,proximaHoraNoDisponible:m,reserva:S}};export{$ as c};
