import{j as e,k as v,a as D,R as A,r as F,i as E}from"./index-Hh7_R6wJ.js";import{B as b}from"./Button-Upt60w8G.js";import{u as z}from"./useForm-FkYXM2nw.js";import{L as n}from"./LabelInput-FL_WFd5g.js";import{D as g}from"./Dropdown-qDlNTB9Q.js";import{S as I}from"./SelectServicio-dSXKXpQ1.js";import{u as O,a as V}from"./usePaciente-mzF8usAv.js";import"./getServiciosNombresYTratamientos-97wtVCyz.js";import"./useUserContext-DcMwd5wI.js";function M(o){let a=new FormData;return a.append("nombre",o.nombre),a.append("fechaDeNac",o.fechaDeNac),a.append("cedula",o.cedula),a.append("edad",o.edad),a.append("sociedad",o.sociedad),a.append("telefono",o.telefono),a.append("nombreContacto2",o.nombreContacto2),a.append("telefonoContacto2",o.telefonoContacto2),a.append("alimentacion",o.alimentacion),a.append("descanso",o.descanso),a.append("hidratacion",o.hidratacion),a.append("alcohol",o.alcohol),a.append("fuma",o.fuma),a.append("alergia",o.alergia),a.append("circulatorio",o.circulatorio),a.append("embarazo",o.embarazo),a.append("operaciones",o.operaciones),a.append("oncologicas",o.oncologicas),a.append("enfermedades",o.enfermedades),a.append("medicamentos",o.medicamentos),a.append("implantes",o.implantes),a.append("tratamiento",o.tratamiento),a.append("servicio",o.servicio),a.append("observaciones",o.observaciones),a.append("foto",o.foto),a}const R=o=>{var r,t,l,c;return{nombre:(o==null?void 0:o.nombre)||"",fechaDeNac:(o==null?void 0:o.fechaDeNac)||"",cedula:(o==null?void 0:o.cedula)||"",edad:(o==null?void 0:o.edad)||"",sociedad:(o==null?void 0:o.sociedad)||"",telefono:(o==null?void 0:o.telefono)||"",observaciones:(o==null?void 0:o.observaciones)||"",nombreContacto2:((r=o==null?void 0:o.contactoEmergencia)==null?void 0:r.nombreContacto2)||"",telefonoContacto2:((t=o==null?void 0:o.contactoEmergencia)==null?void 0:t.telefonoContacto2)||"",alimentacion:(o==null?void 0:o.alimentacion)||"",descanso:(o==null?void 0:o.descanso)||"",hidratacion:(o==null?void 0:o.hidratacion)||"",alcohol:(o==null?void 0:o.alcohol)||"",fuma:(o==null?void 0:o.fuma)||"",alergia:(o==null?void 0:o.alergia)||"",circulatorio:(o==null?void 0:o.circulatorio)||"",embarazo:(o==null?void 0:o.embarazo)||"",operaciones:(o==null?void 0:o.operaciones)||"",oncologicas:(o==null?void 0:o.oncologicas)||"",enfermedades:(o==null?void 0:o.enfermedades)||"",medicamentos:(o==null?void 0:o.medicamentos)||"",implantes:(o==null?void 0:o.implantes)||"",tratamiento:((l=o==null?void 0:o.tratamiento)==null?void 0:l.descripcion)||"",servicio:((c=o==null?void 0:o.servicio)==null?void 0:c.nombre)||"",foto:(o==null?void 0:o.foto)||null}},_={nombre:{required:!0}},B=({edicion:o,handleChange:a,errors:r,values:t})=>{var l;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{className:`${t!=null&&t.nombre?"capitalize":""}`,value:t.nombre,labelText:"Nombre:",name:"nombre",onChange:a,placeholder:"Maria Perez",type:"text",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.fechaDeNac,labelText:"Nacimiento:",name:"fechaDeNac",onChange:a,type:"date",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.cedula,labelText:"Cédula:",name:"cedula",onChange:a,type:"text",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.edad,labelText:"Edad:",name:"edad",onChange:a,type:"number",errors:r,min:0})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.sociedad,labelText:"Emergencia / Sociedad:",name:"sociedad",onChange:a,type:"text",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.telefono,labelText:"Teléfono:",name:"telefono",onChange:a,type:"tel",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.observaciones,labelText:"Observaciones:",name:"observaciones",onChange:a,type:"text",errors:r})}),e.jsxs("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:[e.jsx("label",{children:"Contacto de Emergencia"}),e.jsx(n,{value:t.nombreContacto2,labelText:"Nombre:",name:"nombreContacto2",onChange:a,type:"text",errors:r}),e.jsx(n,{value:t.telefonoContacto2,labelText:"Teléfono:",name:"telefonoContacto2",onChange:a,type:"text",errors:r})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx("label",{htmlFor:"Foto",children:o?"Cambiar Foto:":"Foto:"}),e.jsx("input",{name:"foto",className:"cursor-pointer border border-b border-slate-500 rounded-lg p-4",type:"file",accept:"image/*",onChange:a}),(t.foto||t.imgPreview)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Imagen actual:"}),e.jsx("img",{className:"justify-self-center aspect-square rounded-lg object-cover object-center w-28 h-28",src:t.imgPreview||((l=t.foto)==null?void 0:l.secure_url),alt:`Imagen del paciente ${t.nombre||""}`})]})]})]})},L=({values:o,handleChange:a})=>{const r=(s,j)=>{const f=j.target.textContent;a({target:{name:s,value:f}})},t=["Buena","Regular","Mala"],l=["Menos de 6 horas","8 horas","Mas de 8 horas"],c=["Nunca tomo agua","1 litro de agua","2 o más litros de agua"],u=["Nunca","Ocasionalmente","Siempre"],m=["Nunca","Ocasionalmente","Siempre"];return e.jsxs(e.Fragment,{children:[e.jsx(g,{defaultValue:o.alimentacion,name:"Alimentación",list:t,onClickFunction:s=>{r("alimentacion",s)}}),e.jsx(g,{defaultValue:o.descanso,name:"Descanso",list:l,onClickFunction:s=>{r("descanso",s)}}),e.jsx(g,{defaultValue:o.hidratacion,name:"Hidratación",list:c,onClickFunction:s=>{r("hidratacion",s)}}),e.jsx(g,{defaultValue:o.alcohol,name:"Alcohol",list:u,onClickFunction:s=>{r("alcohol",s)}}),e.jsx(g,{defaultValue:o.fuma,name:"Fuma",list:m,onClickFunction:s=>{r("fuma",s)}})]})},U=({values:o,errors:a,handleChange:r})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.alergia,labelText:"Alergia:",name:"alergia",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.circulatorio,labelText:"Problemas Circulatorios:",name:"circulatorio",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.embarazo,labelText:"Embarazo:",name:"embarazo",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.operaciones,labelText:"Operaciones:",name:"operaciones",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.oncologicas,labelText:"Enfermedades Oncológicas:",name:"oncologicas",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.enfermedades,labelText:"Otras enfermedades:",name:"enfermedades",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.medicamentos,labelText:"Medicamentos:",name:"medicamentos",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 py-2",children:e.jsx(n,{value:o.implantes,labelText:"Implantes:",name:"implantes",onChange:r,type:"text",errors:a})})]}),q=({cambiarActivo:o,seccion:a})=>e.jsxs("article",{className:"relative grid justify-between grid-flow-col border-b border-black pb-2",children:[e.jsx(b,{id:"Personales",disabled:a.Personales,onClickFunction:o,tipo:"button",texto:"1",bgColor:a.Personales}),e.jsx(b,{id:"Costumbres",disabled:a.Costumbres,onClickFunction:o,tipo:"button",texto:"2",bgColor:a.Costumbres}),e.jsx(b,{id:"Afecciones",disabled:a.Afecciones,onClickFunction:o,tipo:"button",texto:"3",bgColor:a.Afecciones}),e.jsx(b,{id:"Servicio",disabled:a.Servicio,onClickFunction:o,tipo:"button",texto:"4",bgColor:a.Servicio})]}),Z=()=>{var y;const o=v(),a=(y=o.state)==null?void 0:y.paciente,r=D(),t=o.pathname===A.admin.editarPaciente,{paciente:l,dispatch:c}=O(),[u]=F.useState(R(l||a)),{handleChange:m,values:s,validateForm:j,errors:f,resetForm:N}=z(u,_),{agregarPaciente:P,editarPaciente:T}=V(),[i,S]=F.useState({Personales:!0,Costumbres:!1,Afecciones:!1,Servicio:!1}),w=h=>{const x=h.target.id,d={...i};if(d[x]=!i[x],d[x])for(const C in d)C!==x&&(d[C]=!1);S(d)},p=()=>{N(),c({type:E.SET_PACIENTE,payload:null}),r(-1)},k=async h=>{if(h.preventDefault(),j()){const d=M(s);(t?await T(d,l._id):await P(d))&&p()}};return e.jsxs("section",{className:"grid p-4",children:[e.jsxs("h1",{className:"font-betonga font-bold text-color-violeta text-2xl tracking-wider text-center mb-4",children:[t?"Editar ":"Agregar ","Paciente"]}),e.jsxs("form",{className:"animate-fadeIn bg-color-logo rounded-lg p-4 max-w-2xl m-auto w-full grid gap-4 border border-black",onSubmit:k,children:[e.jsx(q,{cambiarActivo:w,seccion:i}),i.Personales&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-betonga font-bold text-color-violeta text-xl tracking-wider",children:"Datos Personales"}),e.jsx(B,{edicion:t,errors:f,handleChange:m,values:s})]}),i.Costumbres&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-betonga font-bold text-color-violeta text-xl tracking-wider text-center",children:"Costumbres"}),e.jsx(L,{handleChange:m,values:s})]}),i.Afecciones&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-betonga font-bold text-color-violeta text-xl tracking-wider",children:"Afecciones"}),e.jsx(U,{errors:f,handleChange:m,values:s})]}),i.Servicio&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-betonga font-bold text-color-violeta text-xl tracking-wider text-center",children:"Servicios"}),e.jsx(I,{values:s,handleChange:m})]}),e.jsxs("footer",{className:"grid grid-flow-col gap-2 pt-4 ",children:[e.jsx(b,{className:"w-full",bgColor:!0,tipo:"submit",texto:"Guardar"}),e.jsx(b,{className:"w-full",onClickFunction:p,bgColor:!1,texto:"Cerrar"})]})]})]})};export{Z as default};
