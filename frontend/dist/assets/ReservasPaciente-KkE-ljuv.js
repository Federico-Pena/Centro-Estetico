import{f as y,a as P,r as t,U as h,T as b,k as x,l as f,n as v,i as m,j as o,B as g,P as j,R as S,_ as E}from"./index-rKMOL2j9.js";import{C as T}from"./ContenedorReservas-5187YOyA.js";import{P as A}from"./Pagination-RK6QxsoM.js";import"./LoaderChico-f-07DJwF.js";import"./formatHoraUser-TJ92Iw1g.js";const _=async(e,a,s)=>{const n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${e||""}`}},r=`${P.reservas.deUnPacientes}${a}/${s}`;return await y(r,n)},w=e=>{const{accessToken:a}=t.useContext(h),{setMensaje:s}=t.useContext(b),{dispatch:n}=t.useContext(x),{setLoading:r}=t.useContext(f),[i,c]=t.useState(1),[l,R]=t.useState(!1);return t.useEffect(()=>{(async()=>{try{r(!0);const u=await _(a,i,e),{status:C,error:d,datos:p}=u;C===200?(n({type:v.SET_RESERVAS,payload:p.reservas}),c(p.page),R(p.totalPages)):s(d||"Ocurrió un error al obtener las reservas del paciente")}catch{s("Ocurrió un error al obtener las reservas del paciente")}finally{r(!1)}})()},[a,i,n,s,e,r]),{pagina:i,totalPaginas:l,setPagina:c}},N=({handleAgregarReserva:e})=>{const a=m();return o.jsxs("header",{className:"border-b border-slate-500 p-4 grid grid-flow-col",children:[o.jsx(g,{className:"border border-color-violeta bg-transparent  flex items-center justify-center max-w-fit justify-self-center rounded-lg px-4 py-2  hover:opacity-70 transition-opacity ",tipo:"button",onClickFunction:()=>a(-1),texto:"Volver"}),o.jsx(g,{className:"border border-color-violeta bg-transparent  flex items-center justify-center max-w-fit justify-self-center rounded-lg px-4 py-2  hover:opacity-70 transition-opacity ",tipo:"button",onClickFunction:e,texto:"Agregar Reserva"})]})},F=()=>{const{paciente:e}=t.useContext(j),{loading:a}=t.useContext(f),{reservas:s,dispatch:n}=t.useContext(x),{totalPaginas:r,setPagina:i}=w(e&&e._id),c=m(),l=()=>{c(S.admin.agregarReserva),n({type:v.SET_RESERVA,payload:{paciente:{nombre:e.nombre},horario:{horaInicio:E.split("T")[0]}}})};return o.jsxs("section",{className:"grid grid-rows-[70px_auto_1fr] gap-4 mx-auto max-w-5xl w-full p-4",children:[o.jsx(N,{handleAgregarReserva:l}),s.length>0&&o.jsx(A,{loading:a,totalPages:r,onPageChange:i}),o.jsx(T,{reservas:s})]})};export{F as default};
