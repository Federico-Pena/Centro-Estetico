import{j as e,m as I,c as z,R as _,r as F,l as O}from"./index-D7SXAQHN.js";import{B as u}from"./Button-lIR1oaxr.js";import{u as V}from"./useForm-CHJZnCkj.js";import{L as n}from"./LabelInput-BomlkQxr.js";import{D as j}from"./Dropdown-CiSBuAr5.js";import{S as M}from"./SelectServicio-owglHSM5.js";import{u as R,a as $}from"./usePaciente-21l7RI9C.js";import{T as B}from"./TextErrorForm-D2OMVORA.js";import"./getServiciosNombresYTratamientos-eaN0aF5L.js";import"./useLoaderContext-0fYFxd9T.js";function L(o){let a=new FormData;return a.append("nombre",o.nombre),a.append("fechaDeNac",o.fechaDeNac),a.append("cedula",o.cedula),a.append("edad",o.edad),a.append("sociedad",o.sociedad),a.append("telefono",o.telefono),a.append("nombreContacto2",o.nombreContacto2),a.append("telefonoContacto2",o.telefonoContacto2),a.append("alimentacion",o.alimentacion),a.append("descanso",o.descanso),a.append("hidratacion",o.hidratacion),a.append("alcohol",o.alcohol),a.append("fuma",o.fuma),a.append("alergia",o.alergia),a.append("circulatorio",o.circulatorio),a.append("embarazo",o.embarazo),a.append("operaciones",o.operaciones),a.append("oncologicas",o.oncologicas),a.append("enfermedades",o.enfermedades),a.append("medicamentos",o.medicamentos),a.append("implantes",o.implantes),a.append("tratamiento",o.tratamiento),a.append("servicio",o.servicio),a.append("observaciones",o.observaciones),a.append("foto",o.foto),a}const P=o=>{var g,f,l,s,m;const a=((g=o==null?void 0:o.tratamiento)==null?void 0:g.descripcion)||"",r=(f=o==null?void 0:o.tratamiento)==null?void 0:f.sesiones;let t="";return a&&r!==void 0&&(t=`${a} - ${r} ${r>1?"Sesiones":"Sesión"}`),{nombre:(o==null?void 0:o.nombre)||"",fechaDeNac:(o==null?void 0:o.fechaDeNac)||"",cedula:(o==null?void 0:o.cedula)||"",edad:(o==null?void 0:o.edad)||"",sociedad:(o==null?void 0:o.sociedad)||"",telefono:(o==null?void 0:o.telefono)||"",observaciones:(o==null?void 0:o.observaciones)||"",nombreContacto2:((l=o==null?void 0:o.contactoEmergencia)==null?void 0:l.nombreContacto2)||"",telefonoContacto2:((s=o==null?void 0:o.contactoEmergencia)==null?void 0:s.telefonoContacto2)||"",alimentacion:(o==null?void 0:o.alimentacion)||"",descanso:(o==null?void 0:o.descanso)||"",hidratacion:(o==null?void 0:o.hidratacion)||"",alcohol:(o==null?void 0:o.alcohol)||"",fuma:(o==null?void 0:o.fuma)||"",alergia:(o==null?void 0:o.alergia)||"",circulatorio:(o==null?void 0:o.circulatorio)||"",embarazo:(o==null?void 0:o.embarazo)||"",operaciones:(o==null?void 0:o.operaciones)||"",oncologicas:(o==null?void 0:o.oncologicas)||"",enfermedades:(o==null?void 0:o.enfermedades)||"",medicamentos:(o==null?void 0:o.medicamentos)||"",implantes:(o==null?void 0:o.implantes)||"",tratamiento:t||"",servicio:((m=o==null?void 0:o.servicio)==null?void 0:m.nombre)||"",foto:(o==null?void 0:o.foto)||null}},U={nombre:{required:!0}},q=({edicion:o,handleChange:a,errors:r,values:t})=>{var c;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{className:`${t!=null&&t.nombre?"capitalize":""}`,value:t.nombre,labelText:"Nombre:",name:"nombre",onChange:a,placeholder:"Maria Perez",type:"text",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.fechaDeNac,labelText:"Nacimiento:",name:"fechaDeNac",onChange:a,type:"date",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.cedula,labelText:"Cédula:",name:"cedula",onChange:a,type:"text",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.edad,labelText:"Edad:",name:"edad",onChange:a,type:"number",errors:r,min:0})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.sociedad,labelText:"Emergencia / Sociedad:",name:"sociedad",onChange:a,type:"text",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.telefono,labelText:"Teléfono:",name:"telefono",onChange:a,type:"tel",errors:r})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:t.observaciones,labelText:"Observaciones:",name:"observaciones",onChange:a,type:"text",errors:r})}),e.jsxs("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:[e.jsx("label",{children:"Contacto de Emergencia"}),e.jsx(n,{value:t.nombreContacto2,labelText:"Nombre:",name:"nombreContacto2",onChange:a,type:"text",errors:r}),e.jsx(n,{value:t.telefonoContacto2,labelText:"Teléfono:",name:"telefonoContacto2",onChange:a,type:"text",errors:r})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx("label",{htmlFor:"Foto",children:o?"Cambiar Foto:":"Foto:"}),e.jsx("input",{name:"foto",className:"cursor-pointer border border-b border-slate-500 rounded-lg p-4",type:"file",accept:"image/*",onChange:a}),(t.foto||t.imgPreview)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Imagen actual:"}),e.jsx("img",{className:"justify-self-center aspect-square rounded-lg object-cover object-center w-28 h-28",src:t.imgPreview||((c=t.foto)==null?void 0:c.secure_url),alt:`Imagen del paciente ${t.nombre||""}`})]})]})]})},H=({values:o,handleChange:a})=>{const r=(s,m)=>{const C=m.target.textContent;a({target:{name:s,value:C}})},t=["Buena","Regular","Mala"],c=["Menos de 6 horas","8 horas","Mas de 8 horas"],g=["Nunca tomo agua","1 litro de agua","2 o más litros de agua"],f=["Nunca","Ocasionalmente","Siempre"],l=["Nunca","Ocasionalmente","Siempre"];return e.jsxs(e.Fragment,{children:[e.jsx(j,{defaultValue:o.alimentacion,name:"Alimentación",list:t,onClickFunction:s=>{r("alimentacion",s)}}),e.jsx(j,{defaultValue:o.descanso,name:"Descanso",list:c,onClickFunction:s=>{r("descanso",s)}}),e.jsx(j,{defaultValue:o.hidratacion,name:"Hidratación",list:g,onClickFunction:s=>{r("hidratacion",s)}}),e.jsx(j,{defaultValue:o.alcohol,name:"Alcohol",list:f,onClickFunction:s=>{r("alcohol",s)}}),e.jsx(j,{defaultValue:o.fuma,name:"Fuma",list:l,onClickFunction:s=>{r("fuma",s)}})]})},G=({values:o,errors:a,handleChange:r})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.alergia,labelText:"Alergia:",name:"alergia",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.circulatorio,labelText:"Problemas Circulatorios:",name:"circulatorio",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.embarazo,labelText:"Embarazo:",name:"embarazo",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.operaciones,labelText:"Operaciones:",name:"operaciones",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.oncologicas,labelText:"Enfermedades Oncológicas:",name:"oncologicas",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.enfermedades,labelText:"Otras enfermedades:",name:"enfermedades",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 border-b border-slate-500 py-2",children:e.jsx(n,{value:o.medicamentos,labelText:"Medicamentos:",name:"medicamentos",onChange:r,type:"text",errors:a})}),e.jsx("div",{className:"grid gap-4 py-2",children:e.jsx(n,{value:o.implantes,labelText:"Implantes:",name:"implantes",onChange:r,type:"text",errors:a})})]}),J=({cambiarActivo:o,seccion:a})=>e.jsxs("article",{className:"relative grid justify-between grid-flow-col border-b border-black pb-2",children:[e.jsx(u,{id:"Personales",disabled:a.Personales,onClickFunction:o,tipo:"button",texto:"1",bgColor:a.Personales}),e.jsx(u,{id:"Costumbres",disabled:a.Costumbres,onClickFunction:o,tipo:"button",texto:"2",bgColor:a.Costumbres}),e.jsx(u,{id:"Afecciones",disabled:a.Afecciones,onClickFunction:o,tipo:"button",texto:"3",bgColor:a.Afecciones}),e.jsx(u,{id:"Servicio",disabled:a.Servicio,onClickFunction:o,tipo:"button",texto:"4",bgColor:a.Servicio})]}),to=()=>{var y;const o=I(),a=(y=o.state)==null?void 0:y.paciente,r=z(),t=o.pathname===_.admin.editarPaciente,{paciente:c,dispatch:g}=R(),[f]=F.useState(P(c||a)),{handleChange:l,values:s,errors:m,resetForm:C,onSubmitForm:N,changeInitialValues:w}=V(f,U),{agregarPaciente:T,editarPaciente:S,uploadPdf:v}=$(),[b,D]=F.useState({Personales:!0,Costumbres:!1,Afecciones:!1,Servicio:!1}),k=x=>{const d=x.target.id,i={...b};if(i[d]=!b[d],i[d])for(const h in i)h!==d&&(i[h]=!1);D(i)},p=()=>{C(),g({type:O.SET_PACIENTE,payload:null}),r(-1)},E=async x=>{const d=L(x);(t?await S(d,c._id):await T(d))&&p()},A=async x=>{const d=x.target.files[0],i=await v(d);if(i){const h=P(i);w(h)}};return e.jsxs("section",{className:"grid grid-rows-[auto_auto_1fr] p-4 gap-y-4",children:[e.jsxs("h1",{className:"font-betonga font-bold text-color-violeta text-2xl tracking-wider text-center",children:[t?"Editar ":"Agregar ","Paciente"]}),e.jsxs("div",{className:"grid grid-flow-col items-center gap-4 m-auto w-full max-w-2xl ",children:[e.jsx("label",{htmlFor:"PDF",children:"Importar PDF"}),e.jsx("input",{id:"PDF",name:"pdf",className:"cursor-pointer border border-b border-slate-500 rounded-lg p-2 text-xs",type:"file",accept:"application/pdf",onChange:A})]}),e.jsxs("form",{className:"animate-fadeIn rounded-lg p-4 max-w-2xl w-full m-auto grid grid-rows-[auto_1fr_auto] gap-4 self-start bg-color-verde-blanco border border-gray-300 shadow-lg",onSubmit:x=>N(x,E),children:[e.jsx(J,{cambiarActivo:k,seccion:b}),b.Personales&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-betonga font-bold text-color-violeta text-xl tracking-wider",children:"Datos Personales"}),e.jsx(q,{edicion:t,errors:m,handleChange:l,values:s})]}),b.Costumbres&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-betonga font-bold text-color-violeta text-xl tracking-wider text-center",children:"Costumbres"}),e.jsx(H,{handleChange:l,values:s})]}),b.Afecciones&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-betonga font-bold text-color-violeta text-xl tracking-wider",children:"Afecciones"}),e.jsx(G,{errors:m,handleChange:l,values:s})]}),b.Servicio&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-betonga font-bold text-color-violeta text-xl tracking-wider text-center",children:"Servicios"}),e.jsx(M,{values:s,handleChange:l})]}),e.jsx(B,{errors:m}),e.jsxs("footer",{className:"grid grid-flow-col gap-2 pt-4 ",children:[e.jsx(u,{className:"w-full",bgColor:!0,tipo:"submit",texto:"Guardar"}),e.jsx(u,{className:"w-full",onClickFunction:p,bgColor:!1,texto:"Cerrar"})]})]})]})};export{to as default};
