import{u as b,r as n,j as s}from"./index-YAdz76Jm.js";import{D as x}from"./Dropdown-UufBkZzb.js";import{g as C}from"./getServiciosNombresYTratamientos-ybwHkVIj.js";import{a as h}from"./useLoaderContext-_SMLR0xo.js";const k=({handleChange:a,values:o,errors:i})=>{const{setMensaje:c}=b(),{accessToken:l}=h(),[r,d]=n.useState([]),[v,f]=n.useState([]);n.useEffect(()=>{(async()=>{try{const e=await C(l,c);e&&d(e)}catch{return c("Ocurrió un error"),!1}})()},[l,c]),n.useEffect(()=>{if(o.servicio){const t=r.find(e=>e.nombre===o.servicio);t&&f(t.tratamientos)}},[r,o.servicio]);const p=(t,e)=>{const m=e.target.textContent;a({target:{name:t,value:m}})},S=(t,e)=>{const m=e.target.textContent,u={target:{name:t,value:m}},T={target:{name:"tratamiento",value:""}};a(u),a(T)},g=t=>t.map(e=>e.nombre),j=t=>t.map(e=>`${e.descripcion} - ${e.sesiones} ${e.sesiones>1?"Sesiones":"Sesión"}`);return r.length>0&&s.jsxs(s.Fragment,{children:[i&&i.servicio&&s.jsxs("small",{className:"text-red-600",children:["* ",i.servicio]}),s.jsx(x,{defaultValue:o.servicio,name:"Servicios",list:g(r),onClickFunction:t=>S("servicio",t)}),o.servicio&&v.length>0&&s.jsxs(s.Fragment,{children:[i&&i.tratamiento&&s.jsxs("small",{className:"text-red-600",children:["* ",i.tratamiento]}),s.jsx(x,{defaultValue:o.tratamiento,name:"Tratamientos",list:j(v),onClickFunction:t=>p("tratamiento",t)})]})]})};export{k as S};
