import{j as S,r as T}from"./index-6fbdeef3.js";const I=e=>{const a=e.getTimezoneOffset()*6e4;return new Date(Date.now()-a).toISOString()},F=7,H=8,R=20,U=12,_=30,w=60,N=new Date,P=`${I(N).split("T")[0]}T${N.toLocaleTimeString().split("",5).join("")}`,r={pago:"Pago",pendiente:"Pendiente",cancelada:"Cancelada"},b=e=>e.toLocaleTimeString("es-UY",{hour12:!1,timeZone:"America/Montevideo"}).split(":",2).join(":"),y=e=>e.reduce((a,t)=>{switch(t.estado){case r.pago:a.paga=t;break;case r.pendiente:a.pendiente=t;break;case r.cancelada:a.cancelada=t;break}return a},{paga:null,pendiente:null,cancelada:null}),C=(e,a)=>{if(!(e instanceof Date)||!Array.isArray(a))return{};const t=new Date(e);t.setMinutes(t.getMinutes()+30);const d=b(t),D=e.toISOString().split("T")[0],i=new Intl.DateTimeFormat("es-UY",{hour12:!1,timeZone:"America/Montevideo",hour:"numeric",minute:"numeric",second:"numeric"}).format(e).split(":",2).join(":"),o=`${D} ${i}`,c=a.filter(n=>{var A;const $=(A=n.fecha)==null?void 0:A.split("T")[0],E=`${$} ${n.hora}`,O=`${$} ${n.horaFin}`;return o===E||o===O}),u=c.some(n=>n.pacienteNombre==="admin"),l=c.filter(n=>(n.hora===i||n.horaFin===i)&&(n.estado===r.pendiente||n.estado===r.cancelada||n.estado===r.pago)),f=c.find(n=>(n.hora===d||n.horaFin===d)&&(n.estado===r.pago||n.estado===r.pendiente)),{paga:g,pendiente:h,cancelada:p}=y(c),m=g||h||p||"";return!m&&f?{id:o}:{id:o,estado:m.estado,paga:g,pendiente:h,cancelada:p,reservaAdmin:u,reservadas:l,siguienteHoraNoDisponible:f}},x=({className:e})=>S.jsx("span",{className:`loaderChico ${e||""}`}),s="https://www.masajistanataliapena.com",k={paciente:{agregarPaciente:`${s}/api/pacientes/agregar`,editarPaciente:`${s}/api/pacientes/editar/`,eliminarPaciente:`${s}/api/pacientes/eliminar/`,nombres:`${s}/api/pacientes/nombres`,porId:`${s}/api/pacientes/id/`,todos:`${s}/api/pacientes/todos`},reservas:{deUnDia:`${s}/api/reservas/DeUnDia/`,deLaSemana:`${s}/api/reservas/semanaDel/`,deUnPaciente:`${s}/api/reservas/usuario/`,agregar:`${s}/api/reservas/agregar`,editar:`${s}/api/reservas/editar/`,editarEstado:`${s}/api/reservas/estado/`,eliminar:`${s}/api/reservas/`,dias:`${s}/api/reservas/dias/`},publicas:{fechasHorasReservadasDeUndia:`${s}/api/reservas/dia/horas/`,fechasHorasReservadasDeLaSemana:`${s}/api/publica/reservas/semana/`}};const v=(e,a)=>e===0||e===1?!1:!(a.paga||a.pendiente||a.cancelada),M=(e,a)=>e===0||e===1?`paraReservaAdmin ${a.estado||""}`:a.estado?a.reservaAdmin?`paraReservaAdmin ${a.paga?r.pago:a.pendiente?r.pendiente:a.cancelada?r.cancelada:""}`:a.estado:"",V=({horas:e,onClickReservar:a,publico:t})=>{const[d,D]=T.useState("");return e.length>0&&S.jsx("ul",{className:"horasDisplay",children:e.map((i,o)=>{var u;const c=(u=i.id)==null?void 0:u.split(" ")[1];return t?v(o,i)&&S.jsx("li",{className:`liHora ${c===d?"horaSeleccionada":""}`,onClick:l=>{D(l.target.textContent),a(l)},children:c},i.id||o):S.jsx("li",{className:`
						liHora ${M(o,i)}`,onClick:l=>{D(l.target.textContent),a(l)},children:c},i.id||o)})})},Y=e=>{const a=new Date(e.fecha);a.setUTCHours(a.getUTCHours()+3);const t={year:"numeric",month:"short",day:"numeric",weekday:"short"},d=a.toLocaleDateString("es-UY",t);return a instanceof Date&&d!=="Invalid Date"?d:e.fecha},Z=(e,a)=>{const t=new Date(e);return Number.isNaN(t.getTime())?[]:(t.setDate(t.getDate()-t.getDay()),[...Array(F)].map((D,i)=>{const o=new Date(t);o.setDate(t.getDate()+i+1);const c=6,u=o.getDay()===c?U:R,l=Array.from({length:u-H+1},(p,m)=>m+H),f=Array.from({length:w/_},(p,m)=>m*_),g=l.flatMap(p=>f.map(m=>{if(j(p,m,o)){const n=new Date(o);return n.setHours(p,m,0),n}return null})).filter(Boolean),h=g.map(p=>C(p,a));return{dia:o,horas:g,horaID:h}}))},j=(e,a,t)=>!(e===20&&a===30)&&!(t.getDay()===6&&e===12&&a===30)&&t.getDay()!==0;export{F as D,r as E,P as H,x as L,N as a,k as b,C as c,Z as d,V as e,Y as f,I as g,b as h};
