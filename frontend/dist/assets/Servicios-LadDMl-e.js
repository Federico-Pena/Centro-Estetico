import{r as u,u as b,j as e,A as g}from"./index-eyZDGxlY.js";import{F as w,C}from"./CardServicio-JjuDaq4M.js";import{u as j,f as S,a as y}from"./useUserContext-o9xrNTqb.js";import"./formatFechaParaUser-QfX3A7Bl.js";import"./LabelInput-hKgQ6xdJ.js";import"./useForm-XXMsuw_5.js";import"./TextAreaLabel-g80gc0D1.js";import"./useFormReserva-FiSLYWgK.js";import"./compararFechas-CWI27YET.js";import"./useReservasContext-7CxyEjNX.js";import"./Button-gaWcEQck.js";import"./useObserver-6YU-PPv7.js";const N=()=>{const[s,n]=u.useState(0),[r,a]=u.useState([]),{setMensaje:t}=b(),{accessToken:c}=j();return u.useEffect(()=>{(async()=>{const x=y.publicas.getPromociones,m={headers:{authorization:`Bearer ${c}`}},p=await S(x,m),{error:h,datos:i,status:d}=p;d===200?a(i):t(h||"Error al obtener los datos")})()},[t,c]),u.useEffect(()=>{const x=setInterval(()=>{const m=(s+1)%r.length;n(m)},5e3);return()=>{clearInterval(x)}},[s,r.length]),{promos:r,nextSlide:()=>{const o=(s+1)%r.length;n(o)},prevSlide:()=>{const o=(s-1+r.length)%r.length;n(o)},currentIndex:s}},E=({promos:s,handleReservar:n,currentIndex:r})=>e.jsx("div",{className:"overflow-hidden flex rounded-lg border border-slate-500",children:s.map(a=>{var t,c;return e.jsxs("figure",{className:"transition-transform duration-500 relative flex-[0_0_100%]",style:{transform:`translateX(-${r*100}%)`},children:[e.jsx("img",{className:"object-cover w-full h-full bg-slate-50 aspect-square max-h-[500px]",src:((t=a.imagen)==null?void 0:t.secure_url)||((c=a.servicio.imagen)==null?void 0:c.secure_url),alt:a.nombre}),e.jsx("button",{className:"absolute w-full max-w-64 bottom-4 left-1/2 -translate-x-1/2 font-bold text-slate-50 border-color-violeta bg-color-violeta border-[1px] rounded-md py-2 px-4 transition-colors hover:text-color-violeta hover:bg-transparent",onClick:()=>n(a),children:"Reservar"})]},a._id)})}),I=()=>{const[s,n]=u.useState(!1),[r,a]=u.useState(""),{nextSlide:t,prevSlide:c,promos:l,currentIndex:f}=N(),o=u.useRef(null),x=i=>{o.current=i.touches[0].clientX},m=()=>{o.current},p=i=>{if(o.current===null)return;const d=i.touches[0].clientX,v=o.current-d;v>50?t():v<-50&&c()},h=i=>{const d=`${i.servicio.nombre} - ${i.descripcion}`;a(d),n(!0)};return l instanceof Array?l.length>0&&e.jsxs(e.Fragment,{children:[s&&e.jsx(w,{observaciones:r,cerrarFormulario:()=>n(!1)}),e.jsxs("section",{className:"relative flex justify-center max-w-4xl m-auto mb-8",onTouchStart:x,onTouchMove:p,onTouchEnd:m,children:[l.length>1&&e.jsx("span",{className:"rounded-md cursor-pointer text-4xl absolute z-10 left-0 top-1/2 flex justify-center items-center rotate-90 transition-transform px-4 bg-[#00000025] hover:bg-[#0000003f] hover:scale-95",onClick:c,children:e.jsx(g,{})}),e.jsx(E,{currentIndex:f,handleReservar:h,promos:l}),l.length>1&&e.jsx("span",{className:"rounded-md cursor-pointer text-4xl absolute z-10 right-0 top-1/2 flex justify-center items-center -rotate-90 transition-transform px-4 bg-[#00000025] hover:bg-[#0000003f] hover:scale-95",onClick:t,children:e.jsx(g,{})}),e.jsx("div",{className:" overflow-hidden absolute rounded-xl px-4 py-2 bg-[#00000025] -bottom-10 flex justify-center gap-x-4 m-auto",children:Array.from(l).map((i,d)=>e.jsx("span",{className:`${d===f?"bg-color-violeta translate-y-0":"translate-y-8"} rounded-full w-4 h-4 transition duration-500`},d))})]})]}):null},T=I;function q(){const{setMensaje:s}=b(),{accessToken:n}=j(),[r,a]=u.useState([]);return u.useEffect(()=>{(async()=>{const c=y.publicas.getServicios,l={headers:{authorization:`Bearer ${n}`}},f=await S(c,l),{error:o,datos:x,status:m}=f;m===200?a(x):s(o||"Error al obtener los servicios")})()},[s,n]),e.jsxs("main",{className:"grid py-8 px-4 gap-8",children:[e.jsx("h1",{className:"text-color-violeta font-betonga font-bold text-3xl text-center",children:"Servicios"}),e.jsx(T,{}),e.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 max-w-5xl mx-auto gap-8",children:r instanceof Array&&r.map(t=>t.nombre!=="admin"&&e.jsx(C,{servicio:t},t._id))})]})}export{q as default};
