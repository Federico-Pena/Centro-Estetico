import{r as f,P as T,u as b,i as p}from"./index-bGblmpTd.js";import{f as d,b as P,u as C,a as m}from"./useUserContext-ZLo1aMkK.js";const O=async(t,r)=>{const e=`${P.pacientes.deletePaciente}${r}`,a={method:"DELETE",headers:{Authorization:`Bearer ${t||""}`}};return await d(e,a)},$=async(t,r)=>{const e=P.pacientes.postPaciente,a={method:"POST",body:r,headers:{Authorization:`Bearer ${t||""}`}};return await d(e,a)},A=async(t,r,e)=>{const a=`${P.pacientes.putPaciente}${e}`,l={method:"PUT",body:r,headers:{Authorization:`Bearer ${t||""}`}};return await d(a,l)},N=async(t,r)=>{const e={headers:{"Content-Type":"application/json",Authorization:`Bearer ${t||""}`}},a=`${P.pacientes.getPacienteId}${r}`;return await d(a,e)},I=()=>f.useContext(T),w=async(t,r)=>{const e={headers:{"Content-Type":"application/json",Authorization:`Bearer ${t||""}`}},a=`${P.pacientes.getPacienteNombre}${r}`;return await d(a,e)},U=()=>{const{setLoading:t}=C(),{accessToken:r}=m(),{setMensaje:e}=b(),{dispatch:a}=I(),[l,E]=f.useState(1),[g,h]=f.useState(1);return f.useEffect(()=>{(async()=>{try{const s={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r||""}`}};t(!0);const o=`${P.pacientes.getPacientesPaginados}${l}`,n=await d(o,s),{status:c,error:u,datos:y}=n;c===200?(a({type:p.SET_PACIENTES,payload:y.pacientes}),E(y.page),h(y.totalPages)):e(u||"Ocurrió un error el obtener los pacientes")}catch{e("Ocurrió un error el obtener los pacientes")}finally{t(!1)}})()},[a,e,r,l,t]),{borrarPaciente:async i=>{try{t(!0);const s=await O(r,i._id),{status:o,error:n,mensaje:c}=s;o===200?(e(c),a({type:p.DELETE_PACIENTE,payload:i})):e(n||"Ocurrió un error al eliminar el paciente")}catch{e("Ocurrió un error al eliminar el paciente")}finally{t(!1)}},pagina:l,totalPages:g,setPagina:E,agregarPaciente:async i=>{try{t(!0);const s=await $(r,i),{error:o,datos:n,mensaje:c,status:u}=s;return u===200?(e(c),a({type:p.SET_PACIENTE_NUEVO,payload:n}),!0):o?(e(o),!1):(e("Ocurrió un error al guardar el paciente"),!1)}catch{e("Ocurrió un error al guardar el paciente")}finally{t(!1)}},editarPaciente:async(i,s)=>{try{t(!0);const o=await A(r,i,s),{error:n,datos:c,mensaje:u,status:y}=o;return y===200?(e(u),a({type:p.SET_PACIENTE_NUEVO,payload:c}),!0):n?(e(n),!1):(e("Ocurrió un error al guardar el paciente"),!1)}catch{e("Ocurrió un error al guardar el paciente")}finally{t(!1)}},obtenerPacientePorId:async i=>{try{t(!0);const s=await N(r,i),{status:o,error:n,datos:c}=s;if(o===200)return a({type:p.SET_PACIENTE,payload:c}),c;e(n||"Ocurrió un error el obtener los datos del paciente")}catch{e("Ocurrió un error el obtener los datos del paciente")}finally{t(!1)}},obtenerPacientePorNombre:async i=>{try{t(!0);const s=await w(r,i),{status:o,error:n,datos:c}=s;if(o===200)return a({type:p.SET_PACIENTE,payload:c}),c;e(n||"Ocurrió un error el obtener los datos del paciente")}catch{e("Ocurrió un error el obtener los datos del paciente")}finally{t(!1)}}}};export{U as a,I as u};
