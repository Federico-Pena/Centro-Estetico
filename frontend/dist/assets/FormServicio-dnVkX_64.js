import{r as u,j as e,k as P,a as R,R as _,u as O,b as V}from"./index-bGblmpTd.js";import{u as A}from"./useForm-dmK4_1hC.js";import{B as r}from"./Button-9xCFGcvS.js";import{u as $,a as z}from"./useServicio-Zq3DgL6O.js";import{C as M,O as G}from"./OpenInfo-3xvWKTMF.js";import{T as j}from"./TextAreaLabel-3Zz3tFXL.js";import{L as C}from"./LabelInput-vZH92CXT.js";import"./useUserContext-ZLo1aMkK.js";import"./useObserver-oB8vhmWg.js";function H(t){const i=new FormData;return i.append("nombre",t.nombre.toLowerCase()),i.append("foto",t.imagen),i.append("descripcion",t.descripcion),i.append("descripcionSecundaria",t.descripcionSecundaria),i.append("tituloBeneficios",t.tituloBeneficios),t.beneficiosLista.forEach((s,o)=>{i.append(`beneficiosLista[${o}]`,s)}),i}const U=({handleChange:t,values:i,closeDialog:s})=>{const[o,c]=u.useState(""),d=a=>{a.preventDefault(),o.trim()&&(t({target:{name:"beneficiosLista",value:[...i.beneficiosLista,o]}}),c(""))},n=a=>{const l=i.beneficiosLista.filter(g=>g!==a);t({target:{name:"beneficiosLista",value:l}})};return e.jsx("dialog",{open:!0,className:"fixed inset-0 h-screen w-full z-50 bg-gradient-to-b from-white to-color-verde-blanco grid p-4 ",children:e.jsxs("form",{className:"animate-fadeIn grid gap-4 rounded-lg w-full max-w-lg m-auto p-4 bg-color-logo border border-black",title:"Formulario beneficio",children:[e.jsx(j,{name:"beneficiosLista",placeholder:"Beneficio",onChange:a=>c(a.target.value),value:o}),e.jsxs("strong",{className:"text-center text-color-violeta font-betonga text-xl tracking-wider",children:["Beneficios: ",i.beneficiosLista.length||0]}),e.jsx("div",{className:"grid gap-4 max-h-72 overflow-auto p-4",children:i.beneficiosLista.map((a,l)=>e.jsxs("ul",{className:"grid gap-4 border border-slate-500 rounded-lg p-4 items-center grid-cols-[auto_1fr_auto]",children:[e.jsx("li",{children:l+1}),e.jsx("li",{children:a}),e.jsx("li",{children:e.jsx(r,{texto:"Borrar",onClickFunction:()=>n(a)})})]},l))}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx(r,{bgColor:!0,tipo:"submit",texto:"Agregar",onClickFunction:d}),e.jsx(r,{tipo:"button",texto:"Volver",onClickFunction:s})]})]})})},J=({servicio:t,values:i,handleChange:s,errors:o,masInfo:c,edicion:d})=>{var n,a;return e.jsxs("section",{className:`grid gap-4 border-t border-slate-500 py-2  ${c?"hidden":""}`,children:[e.jsx("div",{className:"grid gap-4 border-slate-500 py-2",children:e.jsx(C,{className:`${t!=null&&t.nombre?"capitalize":""}`,disabled:!!(t!=null&&t.nombre),value:i.nombre,labelText:"Nombre:",name:"nombre",onChange:s,placeholder:"Drenaje Linfático",type:"text",errors:o})}),e.jsxs("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:[e.jsx("label",{htmlFor:"imagen",children:d?"Cambiar imagen:":"Imagen:"}),e.jsx("input",{name:"imagen",id:"imagen",className:"cursor-pointer border border-slate-500 rounded-lg p-4",type:"file",accept:"image/*",onChange:s}),(i.imgPreview||((n=t.imagen)==null?void 0:n.secure_url))&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Imagen actual"}),e.jsx("img",{className:"justify-self-center aspect-square rounded-lg object-cover object-center",src:i.imgPreview||((a=t.imagen)==null?void 0:a.secure_url),alt:`Imagen de servicio ${i.nombre||""}`})]}),o.imagen&&e.jsxs("small",{className:"text-red-600",children:["* ",o.imagen]})]}),e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(j,{name:"descripcion",labelText:"Descripción:",value:i.descripcion,onChange:s,error:o.descripcion,placeholder:"El drenaje linfático es una técnica de masaje suave y ligero que se utiliza para estimular el sistema linfático del cuerpo. El sistema linfático es una red compleja de vasos y ganglios linfáticos que ayudan a eliminar los desechos y el exceso de líquido de los tejidos."})})]})},K=({masInfo:t,values:i,handleChange:s,errors:o,openDialog:c,handleVerServicio:d})=>{var n;return e.jsxs("section",{className:`${t?"":"hidden"}`,children:[e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(j,{name:"descripcionSecundaria",labelText:"Descripción Mas info:",value:i.descripcionSecundaria,onChange:s,error:o.descripcionSecundaria,placeholder:"Durante una sesión de drenaje linfático, se aplican movimientos suaves y rítmicos sobre la piel, siguiendo el trayecto de los vasos linfáticos. Estos movimientos tienen como objetivo estimular el flujo de la linfa, un líquido transparente que transporta nutrientes y desechos a través del sistema linfático"})}),e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(C,{value:i.tituloBeneficios,labelText:"Titulo Beneficios:",name:"tituloBeneficios",onChange:s,placeholder:"El drenaje linfático puede tener varios beneficios para el cuerpo",type:"text",errors:o})}),e.jsxs("div",{className:"grid gap-4 border-t border-slate-500 py-4",children:[e.jsx(r,{className:"w-full",tipo:"button",texto:"Añadir beneficio",onClickFunction:c}),e.jsxs("p",{children:["Beneficios agregados: ",(n=i.beneficiosLista)==null?void 0:n.length]})]}),o.beneficiosLista&&e.jsxs("small",{className:"text-red-500",children:["* ",o.beneficiosLista]}),e.jsx(r,{className:"w-full my-2",onClickFunction:d,tipo:"button",texto:"Pre-visualizar"})]})},Q=({setMasInfo:t,masInfo:i})=>e.jsxs("header",{className:"relative grid justify-between grid-flow-col w-1/2 mx-auto",children:[e.jsx(r,{bgColor:!i,onClickFunction:()=>{t(!1)},texto:"1",tipo:"button"}),e.jsx(r,{bgColor:i,onClickFunction:()=>{t(!0)},texto:"2",tipo:"button"})]}),W={nombre:{required:!0},imagen:{required:!0},descripcion:{required:!0},descripcionSecundaria:{required:!0},tituloBeneficios:{required:!0},beneficiosLista:{minItems:1}},X={nombre:"",imagen:null,imgPreview:"",descripcion:"",descripcionSecundaria:"",tituloBeneficios:"",beneficiosLista:[]},le=()=>{var S,w;const t=P(),i=(S=t.state)==null?void 0:S.servicio,s=R(),o=t.pathname===_.admin.editarServicio,{dispatch:c}=$(),{setMensaje:d}=O(),[n,a]=u.useState(!1),[l,g]=u.useState(!1),[p,f]=u.useState(!1),[x]=u.useState(i||X);u.useState(!1);const y=u.useRef(),{editarServicio:F,agregarServicio:L}=z(),{handleChange:b,values:m,validateForm:D,errors:h,resetForm:k}=A(x,W),I=()=>{a(!0)},B=()=>{a(!1)},q=()=>{f(!0),window.scrollTo({behavior:"smooth",top:0})},v=()=>{f(!1),k(),c({type:V.SET_SERVICIO,payload:null}),s(-1)},E=async T=>{if(T.preventDefault(),D()){const N=H(m);(o?await F(N):await L(N))&&v()}else d("Faltan campos requeridos")};return e.jsxs("section",{className:"grid grid-rows-[auto_1fr] gap-4 px-4 py-8",ref:y,children:[!p&&e.jsx("h1",{className:"uppercase w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:o?"Editar servicio":"Agregar servicio"}),p&&e.jsx(r,{className:"m-auto",onClickFunction:()=>f(!1),texto:"Cerrar",tipo:"button"}),!p&&e.jsxs("form",{onSubmit:E,className:"animate-fadeIn bg-color-logo grid gap-4 px-4 py-8 rounded-lg max-w-lg self-start justify-self-center w-full border border-black",title:"Formulario agregar servicio",children:[e.jsx(Q,{masInfo:l,setMasInfo:g}),e.jsx(J,{edicion:o,errors:h,handleChange:b,masInfo:l,servicio:x,values:m}),e.jsx(K,{errors:h,handleChange:b,handleVerServicio:q,masInfo:l,openDialog:I,values:m}),e.jsxs("footer",{className:"grid grid-flow-col gap-2",children:[e.jsx(r,{className:"w-full",bgColor:!0,tipo:"submit",texto:"Guardar"}),e.jsx(r,{className:"w-full",onClickFunction:v,texto:"Cerrar",tipo:"button"})]})]}),n&&e.jsx(U,{closeDialog:B,handleChange:b,values:m}),p&&e.jsxs("section",{className:"grid gap-8",children:[e.jsx("h2",{className:"underline underline-offset-4 w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:"Primera parte"}),e.jsx(M,{servicio:m}),e.jsx("h2",{className:"underline underline-offset-4 w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:"Ver mas"}),e.jsx(G,{imgSrc:((w=m.imagen)==null?void 0:w.secure_url)||m.imgPreview,servicio:x})]})]})};export{le as default};
