import{r as u,j as e,k as P,a as R,R as _,u as O,b as V}from"./index-YAdz76Jm.js";import{u as A}from"./useForm-kpLBmbY3.js";import{B as r}from"./Button-qbGwCLcH.js";import{u as $,a as z}from"./useServicio-VPT7ZkRQ.js";import{C as M,O as G}from"./OpenInfo-0kH-_mRx.js";import{T as b}from"./TextAreaLabel-U7btEOxD.js";import{L as y}from"./LabelInput-iD2B8GI7.js";import"./useLoaderContext-_SMLR0xo.js";import"./useObserver-k1XNW9GD.js";function H(t){const i=new FormData;return i.append("nombre",t.nombre.toLowerCase()),i.append("foto",t.imagen),i.append("descripcion",t.descripcion),i.append("descripcionSecundaria",t.descripcionSecundaria),i.append("tituloBeneficios",t.tituloBeneficios),t.beneficiosLista.forEach((s,a)=>{i.append(`beneficiosLista[${a}]`,s)}),i}const U=({handleChange:t,values:i,closeDialog:s})=>{const[a,l]=u.useState(""),m=o=>{o.preventDefault(),a.trim()&&(t({target:{name:"beneficiosLista",value:[...i.beneficiosLista,a]}}),l(""))},n=o=>{const c=i.beneficiosLista.filter(g=>g!==o);t({target:{name:"beneficiosLista",value:c}})};return e.jsx("dialog",{open:!0,className:"fixed inset-0 h-screen w-full z-50 bg-whit grid p-4 ",children:e.jsxs("form",{className:"animate-fadeIn grid gap-4 rounded-lg w-full max-w-lg m-auto p-4 bg-color-verde-blanco border border-gray-300 shadow-lg",title:"Formulario beneficio",children:[e.jsx(b,{name:"beneficiosLista",placeholder:"Beneficio",onChange:o=>l(o.target.value),value:a}),e.jsxs("strong",{className:"text-center text-color-violeta font-betonga text-xl tracking-wider",children:["Beneficios: ",i.beneficiosLista.length||0]}),e.jsx("div",{className:"grid gap-4 max-h-72 overflow-auto",children:i.beneficiosLista.map((o,c)=>e.jsxs("ul",{className:"grid gap-4 border border-slate-500 rounded-lg p-4 items-center grid-cols-[auto_1fr_auto]",children:[e.jsx("li",{children:c+1}),e.jsx("li",{children:o}),e.jsx("li",{children:e.jsx(r,{texto:"Borrar",onClickFunction:()=>n(o)})})]},c))}),e.jsxs("div",{className:"grid grid-cols-2 py-4 gap-4",children:[e.jsx(r,{className:"w-full",bgColor:!0,tipo:"submit",texto:"Agregar",onClickFunction:m}),e.jsx(r,{className:"w-full",tipo:"button",texto:"Volver",onClickFunction:s})]})]})})},J=({servicio:t,values:i,handleChange:s,errors:a,masInfo:l,edicion:m})=>{var n,o;return e.jsxs("section",{className:`grid gap-4 border-t border-slate-500 py-2  ${l?"hidden":""}`,children:[e.jsx("div",{className:"grid gap-4 border-slate-500 py-2",children:e.jsx(y,{className:`${t!=null&&t.nombre?"capitalize":""}`,disabled:!!(t!=null&&t.nombre),value:i.nombre,labelText:"Nombre:",name:"nombre",onChange:s,placeholder:"Drenaje Linfático",type:"text",errors:a})}),e.jsxs("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:[e.jsx("label",{htmlFor:"imagen",children:m?"Cambiar imagen:":"Imagen:"}),e.jsx("input",{name:"imagen",id:"imagen",className:"cursor-pointer border border-slate-500 rounded-lg p-4",type:"file",accept:"image/*",onChange:s}),(i.imgPreview||((n=t.imagen)==null?void 0:n.secure_url))&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Imagen actual"}),e.jsx("img",{className:"justify-self-center aspect-square rounded-lg object-cover object-center",src:i.imgPreview||((o=t.imagen)==null?void 0:o.secure_url),alt:`Imagen de servicio ${i.nombre||""}`})]}),a.imagen&&e.jsxs("small",{className:"text-red-600",children:["* ",a.imagen]})]}),e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(b,{name:"descripcion",labelText:"Descripción:",value:i.descripcion,onChange:s,error:a.descripcion,placeholder:"El drenaje linfático es una técnica de masaje suave y ligero que se utiliza para estimular el sistema linfático del cuerpo. El sistema linfático es una red compleja de vasos y ganglios linfáticos que ayudan a eliminar los desechos y el exceso de líquido de los tejidos."})})]})},K=({masInfo:t,values:i,handleChange:s,errors:a,openDialog:l,handleVerServicio:m})=>{var n;return e.jsxs("section",{className:`${t?"":"hidden"}`,children:[e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(b,{name:"descripcionSecundaria",labelText:"Descripción Mas info:",value:i.descripcionSecundaria,onChange:s,error:a.descripcionSecundaria,placeholder:"Durante una sesión de drenaje linfático, se aplican movimientos suaves y rítmicos sobre la piel, siguiendo el trayecto de los vasos linfáticos. Estos movimientos tienen como objetivo estimular el flujo de la linfa, un líquido transparente que transporta nutrientes y desechos a través del sistema linfático"})}),e.jsx("div",{className:"grid gap-4 border-t border-slate-500 py-2",children:e.jsx(y,{value:i.tituloBeneficios,labelText:"Titulo Beneficios:",name:"tituloBeneficios",onChange:s,placeholder:"El drenaje linfático puede tener varios beneficios para el cuerpo",type:"text",errors:a})}),e.jsxs("div",{className:"grid gap-4 border-t border-slate-500 py-4",children:[e.jsx(r,{className:"w-full",tipo:"button",texto:"Añadir beneficio",onClickFunction:l}),e.jsxs("p",{children:["Beneficios agregados: ",(n=i.beneficiosLista)==null?void 0:n.length]})]}),a.beneficiosLista&&e.jsxs("small",{className:"text-red-500",children:["* ",a.beneficiosLista]}),e.jsx(r,{className:"w-full my-2",onClickFunction:m,tipo:"button",texto:"Pre-visualizar"})]})},Q=({setMasInfo:t,masInfo:i})=>e.jsxs("header",{className:"relative grid justify-between grid-flow-col w-1/2 mx-auto",children:[e.jsx(r,{bgColor:!i,onClickFunction:()=>{t(!1)},texto:"1",tipo:"button"}),e.jsx(r,{bgColor:i,onClickFunction:()=>{t(!0)},texto:"2",tipo:"button"})]}),W={nombre:{required:!0},imagen:{required:!0},descripcion:{required:!0},descripcionSecundaria:{required:!0},tituloBeneficios:{required:!0},beneficiosLista:{minItems:1}},X={nombre:"",imagen:null,imgPreview:"",descripcion:"",descripcionSecundaria:"",tituloBeneficios:"",beneficiosLista:[]},ce=()=>{var w,N;const t=P(),i=(w=t.state)==null?void 0:w.servicio,s=R(),a=t.pathname===_.admin.editarServicio,{dispatch:l}=$(),{setMensaje:m}=O(),[n,o]=u.useState(!1),[c,g]=u.useState(!1),[p,f]=u.useState(!1),[j]=u.useState(i||X),C=u.useRef(),{editarServicio:F,agregarServicio:L}=z(),{handleChange:x,values:d,validateForm:D,errors:h,resetForm:I}=A(j,W),k=()=>{o(!0)},B=()=>{o(!1)},q=()=>{f(!0),window.scrollTo({behavior:"smooth",top:0})},v=()=>{f(!1),I(),l({type:V.SET_SERVICIO,payload:null}),s(-1)},E=async T=>{if(T.preventDefault(),D()){const S=H(d);(a?await F(S):await L(S))&&v()}else m("Faltan campos requeridos")};return e.jsxs("section",{className:"grid grid-rows-[auto_1fr] gap-4 px-4 py-8",ref:C,children:[!p&&e.jsx("h1",{className:"uppercase w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:a?"Editar servicio":"Agregar servicio"}),p&&e.jsx(r,{className:"m-auto",onClickFunction:()=>f(!1),texto:"Cerrar",tipo:"button"}),!p&&e.jsxs("form",{onSubmit:E,className:"animate-fadeIn grid gap-4 px-4 py-8 rounded-lg max-w-lg self-start justify-self-center w-full bg-color-verde-blanco border border-gray-300 shadow-lg",title:"Formulario agregar servicio",children:[e.jsx(Q,{masInfo:c,setMasInfo:g}),e.jsx(J,{edicion:a,errors:h,handleChange:x,masInfo:c,servicio:j,values:d}),e.jsx(K,{errors:h,handleChange:x,handleVerServicio:q,masInfo:c,openDialog:k,values:d}),e.jsxs("footer",{className:"grid grid-flow-col gap-2",children:[e.jsx(r,{className:"w-full",bgColor:!0,tipo:"submit",texto:"Guardar"}),e.jsx(r,{className:"w-full",onClickFunction:v,texto:"Cerrar",tipo:"button"})]})]}),n&&e.jsx(U,{closeDialog:B,handleChange:x,values:d}),p&&e.jsxs("section",{className:"grid gap-8",children:[e.jsx("h2",{className:"underline underline-offset-4 w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:"Primera parte"}),e.jsx(M,{servicio:d}),e.jsx("h2",{className:"underline underline-offset-4 w-full text-center text-color-violeta font-bold font-betonga text-2xl tracking-widest",children:"Ver mas"}),e.jsx(G,{imgSrc:((N=d.imagen)==null?void 0:N.secure_url)||d.imgPreview,servicio:d})]})]})};export{ce as default};
