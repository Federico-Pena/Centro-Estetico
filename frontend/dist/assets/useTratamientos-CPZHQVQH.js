import{f as T,a as p,u as f,b as h}from"./useLoaderContext-CL4xz49p.js";import{r as E,T as O,u as A,g as m}from"./index-BN4e8_cD.js";const x=async r=>{const t=p.tratamientos.getTratamientos,e={method:"GET",headers:{authorization:`Bearer ${r}`}};return await T(t,e)},g=async(r,t)=>{const e=p.tratamientos.postTratamiento,a={method:"POST",body:t,headers:{authorization:`Bearer ${r}`}};return await T(e,a)},w=async(r,t)=>{const e=`${p.tratamientos.deleteTratamiento}${t}`,a={method:"DELETE",headers:{Authorization:`Bearer ${r||""}`}};return await T(e,a)},N=async(r,t,e)=>{const a=`${p.tratamientos.putTratamiento}${e}`,l={method:"PUT",headers:{Authorization:`Bearer ${r||""}`},body:t};return await T(a,l)},$=()=>E.useContext(O),I=()=>{const{accessToken:r}=f(),{setMensaje:t}=A(),{setLoading:e}=h(),{dispatch:a}=$();return{obtenerTratamientos:async()=>{try{e(!0);const n=await x(r),{error:o,datos:s,status:i}=n;i===200?a({type:m.SET_TRATAMIENTOS,payload:s}):t(o||"Ocurrió un error al obtener los tratamientos")}catch{t("Ocurrió un error al obtener los tratamientos")}finally{e(!1)}},editarTratamiento:async(n,o)=>{try{e(!0);const s=await N(r,n,o),{error:i,mensaje:c,datos:u,status:y}=s;return y===200?(t(c),a({type:m.SET_TRATAMIENTO_NUEVO,payload:u}),!0):(t(i||"Ocurrió un error al guardar el tratamiento"),!1)}catch{return t("Ocurrió un error al guardar el tratamiento"),!1}finally{e(!1)}},eliminarTratamiento:async n=>{try{e(!0);const o=await w(r,n),{error:s,mensaje:i,datos:c,status:u}=o;u===200?(t(i),a({type:m.DELETE_TRATAMIENTO,payload:c})):t(s||"Ocurrió un error al eliminar el tratamiento")}catch{t("Ocurrió un error al eliminar el tratamiento")}finally{e(!1)}},crearTratamiento:async n=>{try{e(!0);const o=await g(r,n),{error:s,mensaje:i,datos:c,status:u}=o;return u===200?(t(i),a({type:m.SET_TRATAMIENTO_NUEVO,payload:c}),!0):(t(s||"Ocurrió un error al guardar el tratamiento"),!1)}catch{t("Ocurrió un error al guardar el tratamiento")}finally{e(!1)}}}};export{I as a,$ as u};
