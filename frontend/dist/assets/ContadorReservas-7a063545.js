import{r as a,M as $,U as b,j as e,B as P}from"./index-fdcc6e29.js";import{a as k,d as y,b as E,D as R,E as h}from"./FormularioReserva-f9543957.js";import{f as A,T as x}from"./Notificacion-8c30fd53.js";const w=(t,s)=>{const[o,i]=a.useState([]),[g,c]=a.useState(!1),[n,f]=a.useState(k),[v,l]=a.useState([]),[j,d]=a.useState(!1),{setMensaje:D,setError:T}=a.useContext($),{accessToken:p}=a.useContext(b),N=y(n,v);return a.useEffect(()=>{t&&(async()=>{d(!0);let C=n.toISOString().split("T")[0];const u={headers:{"Content-Type":"application/json",Authorization:`Bearer ${p||""}`}};try{const m=`${E.reservas.deLaSemana}${C}`;await A(m,u,S=>{if(S.error){T(S.error);return}else l(S.reservas)})}catch(m){console.log(m)}c(!1),d(!1)})()},[n,p,t,T]),a.useEffect(()=>{s&&!t&&(async()=>{d(!0);const C={headers:{"Content-Type":"application/json",Authorization:`Bearer ${p||""}`}};try{const u=`${E.reservas.deUnDia}${s}`;await A(u,C,m=>{i(m.data)})}catch(u){D(u.message)}c(!1),d(!1)})()},[s,p,t,D]),{delDia:o,loading:g,reservasSemanales:v,diasSemana:N,loadingSemana:j,setReservasSemanales:l,semanaAnterior:()=>{c(!0),d(!0);const r=new Date(n);r.setDate(r.getDate()-R),f(r),c(!1),d(!1)},semanaSiguiente:()=>{c(!0),d(!0);const r=new Date(n);r.setDate(r.getDate()+R),f(r),c(!1),d(!1)},setDelDia:i}},I=w;function M(t){if(t instanceof Array){const s=t.reduce((o,i)=>(i.estado===h.pago?o.terminadas++:i.estado===h.cancelada?o.canceladas++:i.estado===h.pendiente&&o.pendientes++,o),{terminadas:0,canceladas:0,pendientes:0});return{reservasCanceladas:s.canceladas,reservasPendientes:s.pendientes,reservasTerminadas:s.terminadas,reservasTodas:s.canceladas+s.pendientes+s.terminadas}}else return{reservasCanceladas:[],reservasPendientes:[],reservasTerminadas:[],reservasTodas:[]}}function U({reservas:t,mostrarReservadas:s}){const{reservasCanceladas:o,reservasPendientes:i,reservasTerminadas:g,reservasTodas:c}=M(t),[n,f]=a.useState(!1),v=()=>{f(!n)},l=j=>{s(j.currentTarget.className)};return e.jsxs("div",{className:"contador-container",children:[e.jsx(P,{className:"btnContador",tipo:"button",texto:`${n?"Ocultar Contador":"Mostrar Contador"}`,onClickFunction:v}),e.jsxs("section",{className:`contadorEstadosReservas ${n?"visible":"hidden"}`,children:[e.jsxs("div",{className:"Pendiente",onClick:l,children:[e.jsx("p",{children:"Pendientes"}),e.jsx("strong",{children:e.jsx(x,{from:0,to:i,duration:500})})]}),e.jsxs("div",{className:"Cancelada",onClick:l,children:[e.jsx("p",{children:"Canceladas"}),e.jsx("strong",{children:e.jsx(x,{from:0,to:o,duration:500})})]}),e.jsxs("div",{className:"Pago",onClick:l,children:[e.jsx("p",{children:"Pagas"}),e.jsx("strong",{children:e.jsx(x,{from:0,to:g,duration:500})})]}),e.jsxs("div",{className:"Toda",onClick:l,children:[e.jsx("p",{children:"Todas"}),e.jsx("strong",{children:e.jsx(x,{from:0,to:c,duration:500})})]})]})]})}export{U as C,I as u};
