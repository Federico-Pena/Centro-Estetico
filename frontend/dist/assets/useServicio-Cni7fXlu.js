import{f as S,a as p,u as y,b as f}from"./useLoaderContext-0fYFxd9T.js";import{r as v,S as h,u as E,d as l}from"./index-D7SXAQHN.js";const O=async(s,e)=>{const r=p.servicios.postServicio,t={method:"POST",body:e,headers:{authorization:`Bearer ${s}`}};return await S(r,t)},m=async(s,e)=>{const r=p.servicios.putServicio,t={method:"PUT",body:e,headers:{authorization:`Bearer ${s}`}};return await S(r,t)},C=async(s,e)=>{const r=`${p.servicios.deleteServicio}${e}`,t={method:"DELETE",headers:{Authorization:`Bearer ${s||""}`}};return await S(r,t)},I=async s=>{const e=p.servicios.getServicios,r={method:"GET",headers:{authorization:`Bearer ${s}`}};return await S(e,r)},T=()=>v.useContext(h),R=()=>{const{accessToken:s}=y(),{setMensaje:e}=E(),{setLoading:r}=f(),{dispatch:t}=T();return{editarServicio:async n=>{try{r(!0);const o=await m(s,n),{error:a,mensaje:i,datos:c,status:u}=o;if(u===200)return e(i),t({type:l.SET_SERVICIO_NUEVO,payload:c}),!0;if(a)return e(a),!1}catch{return e("Ocurrió un error"),!1}finally{r(!1)}},obtenerServicios:async()=>{try{r(!0);const n=await I(s),{error:o,datos:a,status:i}=n;i===200?t({type:l.SET_SERVICIOS,payload:a}):o&&e(o)}catch{e("Ocurrió un error")}finally{r(!1)}},agregarServicio:async n=>{try{r(!0);const o=await O(s,n),{error:a,mensaje:i,datos:c,status:u}=o;if(u===200)return e(i),t({type:l.SET_SERVICIO_NUEVO,payload:c}),!0;if(a)return e(a),!1}catch{return e("Ocurrió un error"),!1}finally{r(!1)}},eliminarServicio:async n=>{try{r(!0);const o=await C(s,n),{mensaje:a,error:i,datos:c,status:u}=o;u===200?(e(a),t({type:l.DELETE_SERVICIO,payload:c.servicio})):e(i||"Ocurrió un error")}catch{e("Ocurrió un error")}finally{r(!1)}}}};export{R as a,T as u};
